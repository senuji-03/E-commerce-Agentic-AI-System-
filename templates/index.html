{% extends "base.html" %}
{% block title %}Home â€¢ Daraz Agentic AI{% endblock %}
{% block content %}
  <!-- Hero Section -->
  <div class="hero-section">
    <div class="hero-content">
      <h1 class="hero-title">Welcome to Daraz Agentic AI</h1>
      <p class="hero-subtitle">Intelligent e-commerce price tracking and product recommendations powered by AI</p>
      <div style="margin-top:16px;">
        <a class="btn" href="{{ url_for('index') }}">Launch</a>
        <a class="btn secondary" href="{{ url_for('dashboard', category=category) }}">Go to Dashboard</a>
      </div>
    </div>
  </div>

  <div class="grid">
    <!-- Dashboard Section -->
    <div class="card dashboard-card" style="grid-column: span 12;">
      <div class="card-header">
        <h2>ğŸ“Š Dashboard Overview</h2>
        <div class="card-subtitle">Real-time insights into your product data</div>
      </div>
      <div class="grid stats-grid">
        <div class="stat-card" style="grid-column: span 3;">
          <div class="stat-icon">ğŸ“¦</div>
          <div class="stat-content">
            <div class="stat-label">Total Products</div>
            <div class="stat-value">{{ total_products }}</div>
            <div class="stat-description">Products tracked</div>
          </div>
        </div>
        <div class="stat-card" style="grid-column: span 3;">
          <div class="stat-icon">âš ï¸</div>
          <div class="stat-content">
            <div class="stat-label">Below Threshold</div>
            <div class="stat-value">{{ below_count }}</div>
            <div class="stat-description">Need attention</div>
          </div>
        </div>
        <div class="stat-card" style="grid-column: span 3;">
          <div class="stat-icon">ğŸ·ï¸</div>
          <div class="stat-content">
            <div class="stat-label">Last Brand</div>
            <div class="stat-value">{{ last_brand or 'â€”' }}</div>
            <div class="stat-description">Recently added</div>
          </div>
        </div>
        <div class="stat-card" style="grid-column: span 3;">
          <div class="stat-icon">ğŸ”—</div>
          <div class="stat-content">
            <div class="stat-label">Quick Actions</div>
            <div class="quick-actions">
              <a class="btn secondary" href="{{ url_for('tracker') }}" style="padding:6px 7px; font-size:0.85rem;" >
                <span class="btn-icon" style="font-size:0.4rem;" >ğŸ“ˆ</span>
                Price Tracker
              </a>
              <a class="btn secondary" href="{{ url_for('recommendations') }}" style="padding:6px 10px; font-size:0.85rem;" >
                <span class="btn-icon" style="font-size:0.4rem;">ğŸ’¡</span>
                Recommendations
              </a>
          <a class="btn secondary" href="{{ url_for('compare', category=category) }}" style="padding:6px 10px; font-size:0.85rem;" >
            <span class="btn-icon" style="font-size:0.4rem;">âš–ï¸</span>
            Compare
          </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Brand Selection & Scraping Section -->
    <div class="card scraping-card" style="grid-column: span 7;">
      <div class="card-header">
        <h2>ğŸ” Brand Selection & Scraping</h2>
        <div class="card-subtitle">Update product prices and discover new items</div>
      </div>
      <form method="post" action="{{ url_for('scrape') }}" class="scraping-form">
        <div class="form-group" style="grid-column: span 4;">
          <label class="form-label">
            <span class="label-icon">ğŸ“‚</span>
            Category
          </label>
          <select class="input" name="category" id="category-select" onchange="onCategoryChange(this.value)">
            <option value="phones" {% if category not in ['laptops', 'headphones'] %}selected{% endif %}>Phones</option>
            <option value="laptops" {% if category == 'laptops' %}selected{% endif %}>Laptops</option>
            <option value="headphones" {% if category == 'headphones' %}selected{% endif %}>Headphones</option>
            <option value="cameras" {% if category == 'cameras' %}selected{% endif %}>Cameras</option>
          </select>
        </div>
        <div class="form-group" style="grid-column: span 4;">
          <label class="form-label">
            <span class="label-icon">ğŸ¢</span>
            Brand
          </label>
          <select class="input brand-select" name="brand" id="brand-select">
            {% for b in brands %}
              <option value="{{ b }}">{{ b }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="form-group" style="grid-column: span 4;">
          <label class="form-label">
            <span class="label-icon">ğŸ’°</span>
            Price Threshold
          </label>
          <input class="input threshold-input" type="text" name="threshold" placeholder="Rs. 400000" />
        </div>
        <div class="form-group" style="grid-column: span 4; display:flex; align-items:end; gap:10px;">
          <br/>
          <button class="btn scrape-btn" type="submit">
            <span class="btn-icon">ğŸš€</span>
            Update Product Prices
          </button>
        </div>
      </form>
      <div class="brand-tags">
        <div class="tags-label">Quick Brand Selection:</div>
        <div class="tags-container">
          {% for b in brands %}
            <a class="brand-tag" href="#" onclick="quickBrand('{{ b }}'); return false;">
              {{ b }}
            </a>
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- Quick Start & Tips (replaces Products by Brand) -->
    <div class="card" style="grid-column: span 5;">
      <div class="card-header">
        <h2>ğŸ§­ Quick Start & Tips</h2>
        <div class="card-subtitle">Make the most of Daraz Agentic AI</div>
      </div>
      <div class="grid" style="row-gap:12px;">
        <div style="grid-column: span 12;">
          <div class="feature-item">
            <span class="feature-icon">ğŸš€</span>
            <div>
              <div><strong>1. Scrape latest products</strong></div>
              <div style="color:#475569;">Pick a brand and click "Update Product Prices" to refresh data.</div>
            </div>
          </div>
        </div>
        <div style="grid-column: span 12;">
          <div class="feature-item">
            <span class="feature-icon">ğŸ’¡</span>
            <div>
              <div><strong>2. Get recommendations</strong></div>
              <div style="color:#475569;">Search the product name to discover similar items you might like.</div>
            </div>
          </div>
        </div>
        <div style="grid-column: span 12;">
          <div class="feature-item">
            <span class="feature-icon">ğŸ“</span>
            <div>
              <div><strong>3. Read summarized reviews</strong></div>
              <div style="color:#475569;">Open a productâ€™s reviews to see pros, cons, and buying advice.</div>
            </div>
          </div>
        </div>
        <div style="grid-column: span 12; display:flex; gap:8px; margin-top:8px;">
          <a class="btn secondary" href="{{ url_for('tracker') }}"><span class="btn-icon">ğŸ“ˆ</span>Tracker</a>
          <a class="btn secondary" href="{{ url_for('recommendations') }}"><span class="btn-icon">ğŸ¯</span>Recommendations</a>
          <a class="btn secondary" href="{{ url_for('reviews') }}"><span class="btn-icon">ğŸ“</span>Reviews</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Features Section -->
  <div class="features-section">
    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">ğŸ¤–</div>
        <h3>AI-Powered</h3>
        <p>Advanced machine learning algorithms for intelligent product recommendations and price analysis</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">âš¡</div>
        <h3>Real-time Updates</h3>
        <p>Live price tracking and instant notifications when products drop below your threshold</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">ğŸ¯</div>
        <h3>Smart Recommendations</h3>
        <p>Personalized product suggestions based on your preferences and browsing history</p>
      </div>
    </div>
  </div>

  <script>
    function quickBrand(b) {
      const sel = document.querySelector('select[name="brand"]');
      if (sel) sel.value = b;
    }
    function onCategoryChange(cat) {
      const url = new URL(window.location.href);
      url.searchParams.set('category', cat);
      window.location.href = url.toString();
    }
  </script>
{% endblock %}


