{% extends "base.html" %}
{% block title %}Recommendations â€¢ Daraz Agentic AI{% endblock %}
{% block content %}
  <div class="grid">
    <div class="card" style="grid-column: span 12;">
      <h2>Recommendation Agent</h2>
      <form method="post" action="{{ url_for('recommendations') }}" class="grid">
        <div style="grid-column: span 8;">
          <label>Query product name</label>
          <input class="input" type="text" name="query" value="{{ query }}" placeholder="e.g., Samsung Galaxy S24 Ultra" />
        </div>
        <div style="grid-column: span 2;">
          <label>Max price (optional)</label>
          <input class="input" type="number" name="max_price" />
        </div>
        <div style="grid-column: span 2; display:flex; align-items:end;">
          <button class="btn" type="submit">Get Recommendations</button>
        </div>
      </form>
      <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap;">
        {% for b in ["Samsung","Xiaomi","Apple","Google","Nokia","Vivo","Redmi","Huawei"] %}
          <a class="tag" href="#" onclick="quickPick('{{ b }}'); return false;">{{ b }}</a>
        {% endfor %}
      </div>
    </div>

    {% if recs %}
      {% for r in recs %}
        <div class="card" style="grid-column: span 6;">
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div style="font-weight:700;">{{ r.name }}</div>
            <span class="tag">Similarity {{ r.similarity_score }}</span>
          </div>
          <div style="margin:6px 0 10px; color:#dbe7ff;">{{ r.price }}</div>
          <a class="btn secondary" href="{{ r.url }}" target="_blank">Open</a>
        </div>
      {% endfor %}
    {% elif query %}
      <div class="card" style="grid-column: span 12;">
        <span class="tag">No recommendations found for query.</span>
      </div>
    {% else %}
      <div class="card" style="grid-column: span 12;">
        <span class="tag">Enter a query to see recommendations.</span>
      </div>
    {% endif %}
  </div>
  <script>
    function quickPick(text){
      const input = document.querySelector('input[name="query"]');
      if (input) input.value = text;
    }
  </script>
{% endblock %}


